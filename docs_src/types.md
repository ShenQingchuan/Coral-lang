# 数据类型

在 Coral 编程语言中，数据类型用于声明变量和函数。

在上一章节中我们提到过了变量，变量就是申请内存来存储值。也就是说，当创建变量的时候，需要在内存中申请空间。
              
内存管理系统根据变量的类型为变量分配存储空间，分配的空间只能用来储存该类型数据。

## 基本内置类型

Coral 语言提供了如下几种基本类型。

**数字类型：**

- 整型：
    - 有符号：`int`, `int8`（即其他语言的 `byte`）, `int16`（即其他语言的 `short`）, `int64`（即其他语言的 `long`）
    - 无符号：`uint`, `uint8`, `uint16`, `uint64`
    
- 浮点型：`float`, `double`
    - `float`（即其他语言中常见的 `float32`）的精度是 6 位有效数字
        
        取值范围是 **10的-38次方到10的38次方**，`float` 占用 4 字节空间
        
    - `double` 的精度是 15 位有效数字
        
        取值范围是 **10的-308次方到10的308次方**，`double` 占用 8 字节空间。
        
- 字符型: `rune`，实际上等同于 `uint16`，同 Java 使用 `unsigned short` 表达 `char`，可以存储任何字符

- 布尔型：`bool`

## 值类型与引用类型

所有像 `int`、`float`、`bool` 和 `rune` 这些基本内置类型都属于值类型，使用这些类型的变量直接指向存在内存中的值：

当使用等号 `=` 将一个变量的值赋值给另一个变量时，如：`j = i`，实际上是在内存中将 `i` 的值进行了拷贝：

而所谓的引用类型，例如 `String` 类创建的字符串对象实例，应当为一个内存的地址值，指向内存中值所在的部分。在有的编程语言中，这样的 "地址值" 被称为
**指针**，但在 Coral 中，为了降低学习成本，我们倾向于学习 Java 的模式，不为用户提供指针。

对象实例都是引用数据类型。所有引用类型的默认值都是 `nil`。

一个引用变量可以用来引用任何与之兼容的类型。

## 零值说明

- **整型** 为 `0`

- **浮点型** 为 `0.0`

- **字符型** 为 `'\u0000'`

- **布尔类型** 默认为 `false`

- **字符串** 为 `""`（空字符串）

## 类型转换

**类型转换用于将一种数据类型的变量转换为另外一种类型的变量。**
Coral 的 **强制** 类型转换基本格式如下：

```coral
(expression as type_name)
```

`type_name` 为类型，`expression` 为表达式。**注意：括号是必须要有的。**

数据的类型转换须满足如下规则：

- `bool` 类型的变量转换遵循 **"非零值即 `false`"** 的定则
- 不能把对象类型转换成与其不相关类的对象
- 在把容量大的类型转换为容量小的类型时，过程中可能导致溢出或损失精度，例如：
```coral
var i = 128; // 变量 i 为 int 类型
var j = (i as byte);
```
  
  因为 `byte` 类型是 8 位，最大值为 `127`，
  所以当 int 强制转换为 byte 类型时，值大于等于 `128` 时候就会导致溢出。

- 浮点数到整数的转换是通过舍弃小数得到，而不是四舍五入，例如：
```coral
(23.7 as int) == 23        
(-45.89 as int) == -45
```